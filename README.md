# Long-term field trial Westerfeld

[![code style](https://img.shields.io/badge/code%20style-black-black)](https://github.com/psf/black)

Accompanying repository for the data
set ["Westerfeld: Long-term field trial on tillage and fertilization in crop rotation"](https://doi.org/10.20387/bonares-w669-gdsd)
([https://doi.org/10.20387/bonares-w669-gdsd](https://doi.org/10.20387/bonares-w669-gdsd)). This repository contains basic usage
instructions, validation source code for quality assurance of the dataset, data quality reports generated by
[DQ-Kit](https://dqkit.bonares.de), version 1.0, and some examples for the actual use of the dataset.

## Getting started

The following few steps are necessary to get started.

### Get the repository

Clone the repository with [Git](https://www.git-scm.com):
```
git clone https://github.com/laschuet/long-term_field_trial_westerfeld.git
```

Alternatively, [download](https://github.com/raabmarie/long-term_field_trial_westerfeld/archive/refs/heads/main.zip)
and unzip the repository as a file.

### Install Python dependencies

An installation of [Python 3](https://www.python.org) is required.

All Python dependencies for this repository are listed in the file [`requirements.txt`](requirements.txt).

Create a new virtual environment in the root directory of this repository:
```
python3 -m venv .venv
```

Activate the new environment:
```
source .venv/bin/activate
```

Install requirements:
```
python3 -m pip install -r requirements.txt
```

Alternatively, your favorite IDE might also handle the previous steps.

### Get the dataset

Get the [dataset](https://doi.org/10.20387/bonares-w669-gdsd) from the [BonaRes Repository for Soil and Agricultural Research Data](https://www.bonares.de/research-data).

Move the dataset into the root of this repository, i.e., the dataset should be located next to this README.

## Examples

There are (TODO: specify number) examples.

### Printing shapes

Run `python3 examples/shapes.py`.

This example prints out the data category and shape (the number of observations and number of features) for
each individual data table of the dataset. First, it prints out LaTeX code for typesetting a LaTeX table. This result
can be seen in the paper. And second, it prints out a Markdown table which looks like the following:

| Data category       | Data table                    |   #Observations |   #Features |
|:--------------------|:------------------------------|----------------:|------------:|
| Experimental data   | CROP                          |               6 |           5 |
| Experimental data   | CROP_ROTATION                 |             101 |           5 |
| Experimental data   | EXPERIMENTAL_SETUP            |            4800 |           7 |
| Experimental data   | FACTOR                        |               2 |           3 |
| Experimental data   | FACTOR_1_LEVEL                |               2 |           5 |
| Experimental data   | FACTOR_2_LEVEL                |               2 |           5 |
| Experimental data   | PLANT_VARIETY                 |              38 |           4 |
| Experimental data   | PLOT                          |             240 |           8 |
| Experimental data   | REMARK                        |               9 |           3 |
| Experimental data   | SEED_STOCK                    |              38 |           2 |
| Experimental data   | TREATMENT                     |               4 |           3 |
| Field data          | FERTILIZATION                 |           12527 |           8 |
| Field data          | FERTILIZER                    |               7 |           3 |
| Field data          | HARVEST                       |            4716 |           5 |
| Field data          | PLANT_PROTECTION              |           27536 |           8 |
| Field data          | PLANT_PROTECTION_PRODUCT      |             134 |           4 |
| Field data          | PLANT_PROTECTION_PRODUCT_TYPE |               7 |           3 |
| Field data          | SOWING                        |            4728 |           7 |
| Field data          | TILLAGE                       |            4728 |           6 |
| Field data          | TILLAGE_MEASURE               |               2 |           3 |
| Field data          | YIELD                         |            4716 |           8 |
| Microbe communities | FUNGI                         |          299966 |          18 |
| Microbe communities | BACTERIA                      |          771361 |          18 |
| Microbe communities | BIOPROJECT                    |              10 |           2 |
| Microbe communities | HABITAT                       |               2 |           3 |
| Microbe communities | BENEFICIAL                    |               2 |           3 |
| Microbe communities | KINGDOM                       |               3 |           2 |
| Microbe communities | PHYLUM                        |              91 |           3 |
| Microbe communities | CLASS                         |             264 |           3 |
| Microbe communities | ORDER                         |             629 |           3 |
| Microbe communities | FAMILY                        |            1218 |           3 |
| Microbe communities | GENUS                         |            3025 |           3 |
| Microbe communities | SPECIES                       |            6564 |           3 |
| Soil data           | SOIL_LAB                      |            3866 |          25 |
| Soil data           | SOIL_SAMPLING                 |            3866 |           7 |
| Plant data          | GENE_EXPRESSION               |            3520 |           8 |
| Plant data          | GENE_EXPRESSION_CATEGORY      |               5 |           3 |
| Plant data          | PLANT_LAB                     |             224 |          17 |
| Plant data          | PLANT_SAMPLING                |             224 |           5 |
| Plant data          | ROOT                          |             112 |          25 |

### TODO

```
python3 examples/main.py
```

## Validation

There a some source code files in the [`validation`](validation) directory.
We have used these source code files to compare the raw dataset with the final dataset created after the
transformation for database storage purposes. We only provide these source code files for documentation purposes and to
ensure traceability and transparency. It is not possible to run these source code files on your end because we cannot
supply the raw data.

## License

This work is licensed under the [MIT License](./LICENSE.txt).
